# 신호 변경 원인 설명

## 왜 하루 만에 OK → CAUTION으로 바뀌었나요?

### 중요한 점: **주 단위 데이터**

1. **12월 28일 주** (12월 22일~28일): OK
2. **12월 29일 주** (12월 29일~1월 4일): CAUTION

이것은 **다른 주**입니다! 하루가 지난 게 아니라 **새로운 주**가 시작된 것입니다.

---

## 신호 계산 방식

### 전체 신호 결정 규칙:
- **0개 risk 지표** → 🟢 OK
- **1개 risk 지표** → 🟡 CAUTION
- **2개 이상 risk 지표** → 🔴 RISK

### 각 지표의 risk 판단 기준:

#### 1. 기름값 (Gas Price)
- **RISK 조건:**
  - 주간 5% 이상 상승, 또는
  - 연속 3주 이상 상승

#### 2. 인플레이션 (CPI)
- **RISK 조건:**
  - 월간 0.5% 이상 상승, 또는
  - 연속 2개월 이상 상승

#### 3. 금리 (Interest Rate)
- **RISK 조건:**
  - 금리 상승

#### 4. 실업률 (Unemployment)
- **RISK 조건:**
  - 연속 2개월 이상 상승

---

## 왜 CAUTION이 되었나요?

12월 29일 주 데이터를 가져왔을 때, **4가지 지표 중 1개가 risk**로 판단되었기 때문입니다.

가능한 원인:
- 기름값이 이전 주 대비 상승
- 금리가 상승
- 실업률이 상승
- 인플레이션이 상승

**정확한 원인 확인 방법:**
- 유료 구독 시 개별 지표 상세 정보 확인 가능
- 또는 Supabase에서 `indicators` 테이블 확인

---

## 자동 업데이트 설정

### 현재 설정 상태

**Vercel Cron 설정:**
```json
{
  "crons": [
    {
      "path": "/api/cron",
      "schedule": "0 13 * * 1"
    }
  ]
}
```

**의미:**
- 매주 월요일 오후 1시 UTC 실행
- = 미국 동부 시간 월요일 오전 9시 (EDT)
- = 한국 시간 월요일 오후 10시

---

## 자동 업데이트 확인 방법

### 1단계: Vercel Cron Jobs 확인
1. Vercel 대시보드 → Settings → Cron Jobs
2. 다음 정보 확인:
   - **Path**: `/api/cron`
   - **Schedule**: `0 13 * * 1`
   - **Status**: Enabled

### 2단계: 다음 실행 시간 확인
- 다음 월요일 오전 9시 (미국 동부 시간)
- 자동으로 실행됨

### 3단계: 실행 로그 확인
1. Vercel → Logs
2. `/api/cron` 필터 적용
3. 매주 월요일 실행 로그 확인

---

## 수동 실행 (테스트용)

필요시 수동으로 실행 가능:
1. Vercel → Settings → Cron Jobs
2. "Run" 버튼 클릭
3. 또는 API 직접 호출:
   ```
   GET https://cost-signal.vercel.app/api/cron
   ```

---

## 요약

### Q: 하루 만에 바뀐 이유?
**A:** 하루가 지난 게 아니라 **새로운 주**가 시작되어 새로운 데이터를 가져왔고, 그 중 하나의 지표가 risk로 판단되어 CAUTION이 되었습니다.

### Q: 자동 업데이트 되나요?
**A:** 네! 매주 월요일 오전 9시 (미국 동부 시간)에 자동으로 실행됩니다. Vercel Cron Jobs가 설정되어 있습니다.

---

## 다음 실행 예정

- **다음 월요일 오전 9시 (미국 동부 시간)**
- 자동으로 최신 경제 데이터를 가져와서 신호 계산
- Supabase에 저장
- 사이트에 자동 반영


