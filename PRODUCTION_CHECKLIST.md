# 프로덕션 준비 체크리스트

> **목표**: 실제 사용자에게 서비스를 제공할 수 있는 상태로 만들기

---

## ✅ 필수 작업 (Must Have)

### 1. 코드 개선 (보안/안정성) ⚠️ **아직 미완료**
- [ ] **환경 변수 검증 추가** (1-2시간)
  - `lib/env.ts` 생성
  - 앱 시작 시 필수 환경 변수 검증
  - 누락 시 명확한 에러 메시지
- [ ] **입력 검증 강화** (1-2시간)
  - `app/api/account/profile/route.ts`: name 길이 제한 (1-100자)
  - `app/api/push/subscribe/route.ts`: endpoint URL 검증
  - 모든 POST API에 JSON 파싱 에러 처리
- [ ] **타입 안정성 개선** (2-3시간)
  - `any` 타입 10곳을 구체적인 타입으로 변경
  - SessionUser, PaddleWebhookData 타입 정의

### 2. 인프라 설정
- [ ] **도메인 설정** (30분-1시간)
  - 도메인 구매/연결
  - Vercel에 도메인 연결
  - SSL 인증서 확인
- [ ] **Paddle 구독 등록** (1-2시간)
  - Paddle 계정 생성/검증
  - Products 생성 (Monthly, Yearly, Early Bird)
  - Webhook URL 설정
  - 테스트 결제 진행

### 3. 환경 변수 설정 (Vercel)
- [ ] **필수 환경 변수 확인**
  ```
  ✅ NEXTAUTH_SECRET
  ✅ NEXTAUTH_URL (도메인 연결 후)
  ✅ SUPABASE_URL
  ✅ SUPABASE_ANON_KEY
  ✅ SUPABASE_SERVICE_ROLE_KEY
  ✅ OPENAI_API_KEY
  ✅ EIA_API_KEY
  ✅ FRED_API_KEY
  ✅ BLS_API_KEY (선택)
  ✅ PADDLE_API_KEY
  ✅ PADDLE_WEBHOOK_SECRET
  ✅ RESEND_API_KEY
  ✅ RESEND_FROM_EMAIL
  ✅ VAPID_PUBLIC_KEY
  ✅ VAPID_PRIVATE_KEY
  ✅ VAPID_EMAIL
  ✅ CRON_SECRET (선택, 수동 호출용)
  ✅ ADMIN_EMAIL
  ```

### 4. 모니터링 설정
- [ ] **Sentry 설정** (1-2시간)
  - Sentry 프로젝트 생성
  - DSN 환경 변수 추가
  - 에러 추적 확인

---

## 🟡 권장 작업 (Should Have)

### 5. Rate Limiting 추가 (2-3시간)
- [ ] 모든 사용자 입력 API에 rate limiting 적용
- [ ] 일관된 rate limit 설정

### 6. 에러 메시지 표준화 (1-2시간)
- [ ] 표준 에러 메시지 상수 정의
- [ ] 일관된 에러 응답 형식

### 7. 로깅 개선 (1-2시간)
- [ ] 구조화된 로깅 시스템
- [ ] 민감한 정보 필터링

---

## 🟢 선택 작업 (Nice to Have)

### 8. Free/Paid 티어 재조정 (2-3시간)
- [ ] Free: 신호만 (설명 없음)
- [ ] Paid: 신호 + 설명 + 지표 상세
- [ ] 전환율 개선

### 9. 가격 전략 조정 (1-2시간)
- [ ] Early Bird 가격 추가
- [ ] 연간 플랜 추가

### 10. 신뢰성 강화 (1-2시간)
- [ ] 데이터 출처 배지 표시
- [ ] 업데이트 시간 표시

---

## 📋 배포 전 최종 확인

### 기능 테스트
- [ ] 회원가입/로그인 작동 확인
- [ ] 신호 데이터 표시 확인
- [ ] 구독 결제 플로우 테스트
- [ ] 푸시 알림 권한 요청 확인
- [ ] 비밀번호 재설정 작동 확인
- [ ] 계정 삭제 작동 확인

### 보안 확인
- [ ] HTTPS 연결 확인
- [ ] 환경 변수 노출 확인 (없어야 함)
- [ ] API 엔드포인트 보안 확인
- [ ] RLS (Row Level Security) 활성화 확인

### 성능 확인
- [ ] 페이지 로딩 속도 확인
- [ ] API 응답 시간 확인
- [ ] 데이터베이스 쿼리 최적화 확인

### 법적 준비
- [ ] Privacy Policy 페이지 확인
- [ ] Terms of Service 페이지 확인
- [ ] Cookie 정책 (필요시)

---

## 🚀 프로덕션 배포 순서

### 1단계: 코드 개선 (1-2일)
1. 환경 변수 검증 추가
2. 입력 검증 강화
3. 타입 안정성 개선

### 2단계: 인프라 설정 (반일)
1. 도메인 구매/연결
2. Vercel에 도메인 연결
3. 환경 변수 설정 확인

### 3단계: Paddle 설정 (반일)
1. Paddle 계정 검증
2. Products 생성
3. Webhook 설정
4. 테스트 결제

### 4단계: 모니터링 설정 (반일)
1. Sentry 설정
2. 에러 추적 확인

### 5단계: 최종 테스트 (반일)
1. 전체 기능 테스트
2. 보안 확인
3. 성능 확인

### 6단계: 배포 (1일)
1. 프로덕션 배포
2. 모니터링 확인
3. 사용자 피드백 수집 준비

---

## ⚠️ 중요 참고사항

### 필수 vs 선택
- **필수**: 코드 개선 (보안), 도메인, Paddle 설정, 환경 변수, Sentry
- **선택**: Rate Limiting, 에러 메시지 표준화, 로깅 개선
- **나중에**: Free/Paid 티어 재조정, 가격 전략, 신뢰성 강화

### 최소 프로덕션 준비
**가장 빠른 경로** (2-3일):
1. ✅ 코드 개선 (환경 변수 검증, 입력 검증, 타입) - **아직 안 함** (4-6시간)
2. 도메인 설정 (30분-1시간)
3. Paddle 구독 등록 (1-2시간)
4. Sentry 설정 (1-2시간)
5. 최종 테스트 (2-3시간)

**총 예상 시간**: 약 8-12시간 (1-2일)

---

## 📝 체크리스트 요약

### 즉시 해야 할 것 (필수)
- [ ] **코드 개선** (환경 변수, 입력 검증, 타입) - ⚠️ **아직 안 함**
- [ ] 도메인 설정
- [ ] Paddle 구독 등록
- [ ] Sentry 설정

### 나중에 해도 되는 것 (선택)
- [ ] Rate Limiting 추가
- [ ] 에러 메시지 표준화
- [ ] 로깅 개선
- [ ] Free/Paid 티어 재조정

---

## ✅ 결론

**프로덕션 준비를 위해서는:**

1. ✅ **코드 개선** (환경 변수 검증, 입력 검증, 타입 안정성)
2. ✅ **도메인 설정**
3. ✅ **Paddle 구독 등록**
4. ✅ **Sentry 설정** (에러 모니터링)

이 4가지만 완료하면 **최소한의 프로덕션 준비는 완료**됩니다.

나머지 작업들 (Rate Limiting, 에러 메시지 표준화, 로깅 개선, Free/Paid 티어 재조정 등)은 **서비스 런칭 후 점진적으로 개선**해도 됩니다.

---

**예상 총 시간**: 8-12시간 (1-2일)
**최소 필수 시간**: 4-6시간 (반일)

